<!DOCTYPE html>
<html>
<head>
<title id="title">Tunnel</title>
<link id="fav" rel="icon" type="image/png" href="Tunnelfav.png"/>
  <style>
    td {
      padding: 0px;
    }
    .screen {
      height: 70%;
    }
    .inputL {
      float: left;
      height: 30%;
      width: 1110px;
    }
    .inputR {
      float: left;
      height: 30%;
      text-align: right;
    }
    .input {
      width: 100px;
      height: 100px;
    }
    .tile {
      font-size: 11pt;
      width: 24px;
      height: 24px;
    }
    .water {
      background-color: blue;
    }
    .land {
      background-color: green;
    }
    .wall {
      background-color: gray;
    }
    .goal {
      background-color: yellow;
    }
    .sand {
      background-color: tan;
    }
    #screen {
      border-spacing: 0px;
    }
  </style>
</head>
<body>
  <div class="screen">
    <h1 id="top">This is a tunnel.</h1>
    <a id="link" href="./sandbox.html"></a>
    <table id="screen" align="center">
      <tr>
      <td><button id=11 class="water tile" onclick="tunnel(11)"></button></td>
      <td><button id=12 class="water tile" onclick="tunnel(12)"></button></td>
      <td><button id=13 class="water tile" onclick="tunnel(13)"></button></td>
      <td><button id=14 class="land tile" onclick="tunnel(14)">λ</button></td>
      <td><button id=15 class="land tile" onclick="tunnel(15)"></button></td>
      <td><button id=16 class="water tile" onclick="tunnel(16)"></button></td>
      <td><button id=17 class="water tile" onclick="tunnel(17)"></button></td>
      <td><button id=18 class="water tile" onclick="tunnel(18)"></button></td>
      <td><button id=19 class="water tile" onclick="tunnel(19)"></button></td>
      </tr>
      <tr>
      <td><button id=21 class="water tile" onclick="tunnel(21)"></button></td>
      <td><button id=22 class="water tile" onclick="tunnel(22)"></button></td>
      <td><button id=23 class="land tile" onclick="tunnel(23)"></button></td>
      <td><button id=24 class="land tile" onclick="tunnel(24)"></button></td>
      <td><button id=25 class="land tile" onclick="tunnel(25)"></button></td>
      <td><button id=26 class="land tile" onclick="tunnel(26)"></button></td>
      <td><button id=27 class="land tile" onclick="tunnel(27)"></button></td>
      <td><button id=28 class="water tile" onclick="tunnel(28)"></button></td>
      <td><button id=29 class="water tile" onclick="tunnel(29)"></button></td>
      </tr>
      <tr>
      <td><button id=31 class="land tile" onclick="tunnel(31)"></button></td>
      <td><button id=32 class="land tile" onclick="tunnel(32)"></button></td>
      <td><button id=33 class="land tile" onclick="tunnel(33)"></button></td>
      <td><button id=34 class="land tile" onclick="tunnel(34)"></button></td>
      <td><button id=35 class="land tile" onclick="tunnel(35)"></button></td>
      <td><button id=36 class="land tile" onclick="tunnel(36)"></button></td>
      <td><button id=37 class="land tile" onclick="tunnel(37)"></button></td>
      <td><button id=38 class="land tile" onclick="tunnel(38)"></button></td>
      <td><button id=39 class="water tile" onclick="tunnel(39)"></button></td>
      </tr>
      <tr>
      <td><button id=41 class="land tile" onclick="tunnel(41)"></button></td>
      <td><button id=42 class="land tile" onclick="tunnel(42)"></button></td>
      <td><button id=43 class="land tile" onclick="tunnel(43)"></button></td>
      <td><button id=44 class="land tile" onclick="tunnel(44)"></button></td>
      <td><button id=45 class="land tile" onclick="tunnel(45)"></button></td>
      <td><button id=46 class="land tile" onclick="tunnel(46)"></button></td>
      <td><button id=47 class="land tile" onclick="tunnel(47)"></button></td>
      <td><button id=48 class="land tile" onclick="tunnel(48)"></button></td>
      <td><button id=49 class="land tile" onclick="tunnel(49)"></button></td>
      </tr>
      <tr>
      <td><button id=51 class="land tile" onclick="tunnel(51)"></button></td>
      <td><button id=52 class="land tile" onclick="tunnel(52)"></button></td>
      <td><button id=53 class="land tile" onclick="tunnel(53)"></button></td>
      <td><button id=54 class="land tile" onclick="tunnel(54)"></button></td>
      <td><button id=55 class="land tile" onclick="tunnel(55)"></button></td>
      <td><button id=56 class="water tile" onclick="tunnel(56)"></button></td>
      <td><button id=57 class="water tile" onclick="tunnel(57)"></button></td>
      <td><button id=58 class="land tile" onclick="tunnel(58)"></button></td>
      <td><button id=59 class="land tile" onclick="tunnel(59)"></button></td>
      </tr>
      <tr>
      <td><button id=61 class="land tile" onclick="tunnel(61)"></button></td>
      <td><button id=62 class="land tile" onclick="tunnel(62)"></button></td>
      <td><button id=63 class="land tile" onclick="tunnel(63)"></button></td>
      <td><button id=64 class="land tile" onclick="tunnel(64)"></button></td>
      <td><button id=65 class="land tile" onclick="tunnel(65)"></button></td>
      <td><button id=66 class="water tile" onclick="tunnel(66)"></button></td>
      <td><button id=67 class="goal land tile" onclick="tunnel(67)"></button></td>
      <td><button id=68 class="land tile" onclick="tunnel(68)"></button></td>
      <td><button id=69 class="land tile" onclick="tunnel(69)"></button></td>
      </tr>
      <tr>
      <td><button id=71 class="water tile" onclick="tunnel(71)"></button></td>
      <td><button id=72 class="land tile" onclick="tunnel(72)"></button></td>
      <td><button id=73 class="land tile" onclick="tunnel(73)"></button></td>
      <td><button id=74 class="land tile" onclick="tunnel(74)"></button></td>
      <td><button id=75 class="land tile" onclick="tunnel(75)"></button></td>
      <td><button id=76 class="land tile" onclick="tunnel(76)"></button></td>
      <td><button id=77 class="land tile" onclick="tunnel(77)"></button></td>
      <td><button id=78 class="land tile" onclick="tunnel(78)"></button></td>
      <td><button id=79 class="land tile" onclick="tunnel(79)"></button></td>
      </tr>
      <tr>
      <td><button id=81 class="water tile" onclick="tunnel(81)"></button></td>
      <td><button id=82 class="land tile" onclick="tunnel(82)"></button></td>
      <td><button id=83 class="land tile" onclick="tunnel(83)"></button></td>
      <td><button id=84 class="land tile" onclick="tunnel(84)"></button></td>
      <td><button id=85 class="land tile" onclick="tunnel(85)"></button></td>
      <td><button id=86 class="land tile" onclick="tunnel(86)"></button></td>
      <td><button id=87 class="land tile" onclick="tunnel(87)"></button></td>
      <td><button id=88 class="land tile" onclick="tunnel(88)"></button></td>
      <td><button id=89 class="water tile" onclick="tunnel(89)"></button></td>
      </tr>
      <tr>
      <td><button id=91 class="water tile" onclick="tunnel(91)"></button></td>
      <td><button id=92 class="water tile" onclick="tunnel(92)"></button></td>
      <td><button id=93 class="water tile" onclick="tunnel(93)"></button></td>
      <td><button id=94 class="land tile" onclick="tunnel(94)"></button></td>
      <td><button id=95 class="land tile" onclick="tunnel(95)">X</button></td>
      <td><button id=96 class="land tile" onclick="tunnel(96)"></button></td>
      <td><button id=97 class="water tile" onclick="tunnel(97)"></button></td>
      <td><button id=98 class="water tile" onclick="tunnel(98)"></button></td>
      <td><button id=99 class="water tile" onclick="tunnel(99)"></button></td>
      </tr>
    </table>
  </div>
  <div class="inputL">
    <table class="inputT">
      <tr>
        <td></td>
        <td><button id="W" class="input" onclick="tunnel(1)">W</button></td>
        <td></td>
      </tr>
      <tr>
        <td><button id="A" class="input" onclick="tunnel(2)">A</button></td>
        <td><button id="S" class="input" onclick="tunnel(3)">S</button></td>
        <td><button id="D" class="input" onclick="tunnel(4)">D</button></td>
      </tr>
    </table>
  </div>
  <script>
    console.log()
    var pos = 95;
    var epos = 14;
    var gpos = 10;
    var spos = 0;
    while (gpos <= 10 || gpos%10 == 0) {
      gpos = Math.floor(Math.random() * 100);
    }
    var scr = 0;

    function tunnel(key) {
      if (document.getElementById("top").innerHTML != scr) {
        document.getElementById("top").innerHTML = "Get the λ to the yellow goal.";
      }
      document.getElementById(pos).innerHTML = "";
      document.getElementById(epos).innerHTML = "";
      if (key == 1 && pos > 20 && document.getElementById(pos-10).classList.contains("land")) {
        pos -= 10;
      } else if (key == 2 && pos%10 > 1 && document.getElementById(pos-1).classList.contains("land")) {
        pos -= 1;
      } else if (key == 3 && pos < 90 && document.getElementById(pos+10).classList.contains("land")) {
        pos += 10;
      } else if (key == 4 && pos%10 < 9 && document.getElementById(pos+1).classList.contains("land")) {
        pos += 1;
      } else if (key > 10) {
        if (document.getElementById(key).classList.contains("land") && !document.getElementById(key).classList.contains("goal") && !document.getElementById(key).classList.contains("sand")) {
          document.getElementById(key).classList = "wall tile";
        } else if (document.getElementById(key).classList.contains("wall")) {
          document.getElementById(key).classList = "land tile";
        } else if (document.getElementById(key).classList.contains("sand")) {
          document.getElementById(key).classList = "wall tile";
          document.getElementById("link").innerHTML = "you found a \"beach\"";
        }
      }

      if (epos-(epos%10) > pos-(pos%10) && epos > 20 && document.getElementById(epos-10).classList.contains("land")) {
        epos -= 10;
      } if (epos%10 > pos%10 && epos%10 > 1 && document.getElementById(epos-1).classList.contains("land")) {
        epos -= 1;
      } if (epos-(epos%10) < pos-(pos%10) && epos < 90 && document.getElementById(epos+10).classList.contains("land")) {
        epos += 10;
      } if (epos%10 < pos%10 && epos%10 < 9 && document.getElementById(epos+1).classList.contains("land")) {
        epos += 1;
      }
      document.getElementById(pos).innerHTML = "X";
      document.getElementById(epos).innerHTML = "λ";

      if (document.getElementById(epos).classList.contains("goal") && epos != pos) {
        scr++;
        document.getElementById("top").innerHTML = scr;
        document.getElementById(epos).classList = "land tile";
        gpos = Math.floor(Math.random() * 100);
        while (gpos <= 10 || gpos%10 == 0) {
          gpos = Math.floor(Math.random() * 100);
        }
        if (document.getElementById(gpos).classList.contains("water")) {
          if (document.getElementById(gpos-10)) {
            document.getElementById(gpos-10).classList = "land tile";
          }
          if (document.getElementById(gpos+10)) {
            document.getElementById(gpos+10).classList = "land tile";
          }
          if (document.getElementById(gpos-1)) {
            document.getElementById(gpos-1).classList = "land tile";
          }
          if (document.getElementById(gpos+1)) {
            document.getElementById(gpos+1).classList = "land tile";
          }
        }
        document.getElementById(gpos).classList = "goal land tile";
      }
      
      spos = Math.floor(Math.random() * 100);
      if (document.getElementById(spos).classList.contains("land") && (document.getElementById(spos+1).classList.contains("water") || document.getElementById(spos-1).classList.contains("water") || document.getElementById(spos+10).classList.contains("water") || document.getElementById(spos-10).classList.contains("water")) && Math.floor(Math.random() * 20) == 1 && scr >= 10) {
            document.getElementById(spos).classList = "sand land tile";
      }
    }

    document.onkeydown = function (e) {
      e = e || window.event;
      switch (e.which || e.keyCode) {
        case 81 : document.getElementById("Q").click();
          break;
        case 87 : document.getElementById("W").click();
          break;
        case 69 : document.getElementById("E").click();
          break;
        case 65 : document.getElementById("A").click();
          break;
        case 83 : document.getElementById("S").click();
          break;
        case 68 : document.getElementById("D").click();
          break;
        case 38 : document.getElementById("Up").click();
          break;
        case 37 : document.getElementById("Left").click();
          break;
        case 40 : document.getElementById("Down").click();
          break;
        case 39 : document.getElementById("Right").click();
          break;
      }
    }
  </script>
</body>
</html>
